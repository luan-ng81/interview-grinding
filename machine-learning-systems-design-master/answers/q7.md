# Answer to question 7

**Question 7**

How would you build a system to suggest trending hashtags on Twitter?

**Answer**

I. Question for guidance/clarification: 
	1. Definition of "trending" hastags:
	-  A trending hashtag must show a significant spike in usage, not just consistent popularity.
	- Difference btw trending hashtags and news:  Growth in a specific day or week can indicate trendiness, whereas growth over a long period of time is likely news on repeat (think #tesla).

	2. How to measure the success of the algorithm ( business objective): also mention evaluation metrics

	3. What are the challenges: 
	a. Real time detection

	b. Balancing cost and latency: what is good trade-off? 

	c. Defining “trendiness” thresholds: clarify time window you want to track (whether within 1 hours, or 6 hours, or a day). This time-window threshold will be corellated with 2 and 3b.  Also this threadhold maybe a function of users/location. 

	d. Bot and NSFW filtering: ethical issues like misinformation, bot influence, and censorship risks.

	4. Monitor the system: measure the effect of system
	(both online and offline)
	- A/B testing: online 
	- Data analysis: offline (check back with point (2) and point 3a. )


II. System Design 

1. Approach for general systems: provide a baseline models

a. Rule-Based System: 
- Time window: the short, recent time span over which hashtag activity is measured (e.g., the last 1 hour)
- Period length: a longer historical time span used as a baseline for comparison (e.g., the last 7 days).
- Compare Current vs. Historical Use: 

Trending Score = (Current Count in Time Window) / (Average Count in Period)

Hashtag     |    Current (1h)   |    Avg/hour (7d)   |    Trending Score

#Olympics   |     5000          |    500             |    10
#BTS        |     3000 	        |    3200			 |    0.94
#NewGame    |     1200 			|    50              |    24.0

- Apply Thresholds (use historical threshold)
	•	Only consider hashtags with:
	•	Minimum raw count in the current window (e.g., at least 100 mentions)
	•	Trending Score above a certain value (e.g., > 5× the historical average)
	
- Rank and Select Top Hashtags
	•	Sort hashtags by Trending Score or raw spike.
	•	Show top-k hashtags as “trending”.


* Limitation of rule-based system: 
- Vulnerable to Bots and Spam: bots can easily manipulate what appears as trending
- Lack of Semantic Understanding: Overbundance with similar topics, lacks of variety
- No Context Awareness: Can’t distinguish between organic trends and harmful/offensive content. E.g: NSFW or hate-related hashtags can trend if they spike suddenly
-  Rigid Thresholds: Hand-tuned rules


b. ML Systems: 

Topic Modeling:  train a model to represent the hashtags as feature vectors (i.e. hashtag2vec) and use unsupervised learning to group together hashtags that are close to each other in the latent space


2. Approach for customized systems: 
- Localization (Trend by Geography or Language): count based on segments
- Personalization (Trend by Interests or Behavior)
	+ Collaborative Filtering: Recommend hashtags that similar users are interacting with, matrix factorization or user-hashtag embeddings
	+ Content-Based Filtering: Build user profiles from their followed accounts, past hashtag use, tweet topics
	=> Match users to trending hashtags with semantic similarity (e.g., cosine similarity between embeddings).


3. Metric Evaluation: measure user engagement
- Click-through-rate (CTR): % of users who see a trending hashtag clicks on it.
- Interactions with the hashtag: views, likes, comments, and shares of tweets containing that hashtag
- Usage of the hashtag: whether a user uses the hashtag shown to them in their future tweets.
The user’s engagement with the platform overall.






